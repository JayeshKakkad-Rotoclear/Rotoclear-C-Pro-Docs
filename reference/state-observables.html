<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>State Observables - RotoClear Camera Server Documentation</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><a href="/index.html">RotoClear Docs</a></h1>
                <p>Camera Server Documentation</p>
            </div>
            <nav class="sidebar-nav">
                <ul class="nav-menu">
                    <li class="nav-item depth-0">
<a href="/index.html">Home</a>
</li>
<li class="nav-item depth-0">
<a href="/getting-started.html">Getting Started</a>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Architecture</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/architecture/overview.html">Overview</a>
</li>
<li class="nav-item depth-1">
<a href="/architecture/state-management.html">State Management</a>
</li>
<li class="nav-item depth-1">
<a href="/architecture/camera-pipeline.html">Camera Pipeline</a>
</li>
<li class="nav-item depth-1">
<a href="/architecture/metadata-sqlite.html">Metadata & SQLite</a>
</li>
<li class="nav-folder depth-1">
<span class="folder-title">Decisions</span>
<ul class="nav-submenu">
<li class="nav-item depth-2">
<a href="/architecture/decisions/ADR-0001-nim-language.html">ADR-0001 Nim Language</a>
</li>
<li class="nav-item depth-2">
<a href="/architecture/decisions/ADR-0002-corun-framework.html">ADR-0002 Corun Framework</a>
</li>
<li class="nav-item depth-2">
<a href="/architecture/decisions/ADR-0003-observable-state.html">ADR-0003 Observable State</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">API Reference</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/api/README.html">Overview</a>
</li>
<li class="nav-item depth-1">
<a href="/api/websocket-api.html">WebSocket API</a>
</li>
<li class="nav-item depth-1">
<a href="/api/http-api.html">HTTP API</a>
</li>
<li class="nav-item depth-1">
<a href="/api/rtsp-streaming.html">RTSP Streaming</a>
</li>
<li class="nav-folder depth-1">
<span class="folder-title">Examples</span>
<ul class="nav-submenu">
<li class="nav-item depth-2">
<a href="/api/examples/python-client.html">Python Client</a>
</li>
<li class="nav-item depth-2">
<a href="/api/examples/javascript-client.html">JavaScript Client</a>
</li>
<li class="nav-item depth-2">
<a href="/api/examples/csharp-client.html">C# Client</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Configuration</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/configuration/environments.html">Environments</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/factory-config.html">Factory Config</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/license-config.html">License Config</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/deployment-variants.html">Deployment Variants</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/camera-system.html">Camera System</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/network.html">Network</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/storage-backup.html">Storage & Backup</a>
</li>
<li class="nav-item depth-1">
<a href="/configuration/authentication.html">Authentication</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Camera System</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/camera/hardware-interface.html">Hardware Interface</a>
</li>
<li class="nav-item depth-1">
<a href="/camera/streaming.html">Streaming</a>
</li>
<li class="nav-item depth-1">
<a href="/camera/recording.html">Recording</a>
</li>
<li class="nav-item depth-1">
<a href="/camera/image-processing.html">Image Processing</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Operations</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/operations/build-and-deploy.html">Build and Deploy</a>
</li>
<li class="nav-item depth-1">
<a href="/operations/build-deploy.html">Build & Deploy (Alt)</a>
</li>
<li class="nav-item depth-1">
<a href="/operations/monitoring.html">Monitoring</a>
</li>
<li class="nav-item depth-1">
<a href="/operations/performance.html">Performance</a>
</li>
<li class="nav-item depth-1">
<a href="/operations/troubleshooting.html">Troubleshooting</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Security</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/security/authentication.html">Authentication</a>
</li>
<li class="nav-item depth-1">
<a href="/security/permissions.html">Permissions</a>
</li>
<li class="nav-item depth-1">
<a href="/security/ssl-certificates.html">SSL Certificates</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Testing</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/testing/testing-strategy.html">Strategy</a>
</li>
<li class="nav-item depth-1">
<a href="/testing/strategies.html">Strategies</a>
</li>
<li class="nav-item depth-1">
<a href="/testing/test-cases.html">Test Cases</a>
</li>
<li class="nav-item depth-1">
<a href="/testing/validation.html">Validation</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Integration</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/integration/onvif-protocol.html">ONVIF Protocol</a>
</li>
<li class="nav-item depth-1">
<a href="/integration/third-party.html">Third Party</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Reference</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/reference/glossary.html">Glossary</a>
</li>
<li class="nav-item depth-1">
<a href="/reference/requirements.html">Requirements</a>
</li>
<li class="nav-item depth-1 active">
<a href="/reference/state-observables.html">State Observables</a>
</li>
</ul>
</li>
<li class="nav-folder depth-0">
<span class="folder-title">Releases</span>
<ul class="nav-submenu">
<li class="nav-item depth-1">
<a href="/releases/CHANGELOG.html">Changelog</a>
</li>
</ul>
</li>
<li class="nav-item depth-0">
<a href="/glossary.html">Glossary</a>
</li>
                </ul>
            </nav>
        </aside>
        
        <main class="content">
            <div class="content-wrapper">
                <h1 id="state-observables-reference">State Observables Reference</h1>
<h2 id="overview">Overview</h2>
<p>This document provides a comprehensive reference of all state observables in the RotoClear camera system. Observables are the core state management mechanism, providing reactive updates and persistent storage.</p>
<h2 id="observable-system">Observable System</h2>
<h3 id="core-concepts">Core Concepts</h3>
<div class="codehilite"><pre><span></span><code><span class="k">type</span>
<span class="w">  </span><span class="n">Observable</span><span class="o">*</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">ref</span><span class="w"> </span><span class="k">object</span>
<span class="w">    </span><span class="n">key</span><span class="o">*</span><span class="p">:</span><span class="w"> </span><span class="nb">string</span><span class="w">                    </span><span class="c"># Unique identifier</span>
<span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="n">JsonNode</span><span class="w">                 </span><span class="c"># Current value</span>
<span class="w">    </span><span class="n">default</span><span class="o">*</span><span class="p">:</span><span class="w"> </span><span class="n">JsonNode</span><span class="w">              </span><span class="c"># Default value</span>
<span class="w">    </span><span class="n">save</span><span class="o">*</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w">                     </span><span class="c"># Persist to LocalStorage</span>
<span class="w">    </span><span class="n">permissionRead</span><span class="o">*</span><span class="p">:</span><span class="w"> </span><span class="n">StatePermissions</span><span class="w">   </span><span class="c"># Read permissions required</span>
<span class="w">    </span><span class="n">permissionWrite</span><span class="o">*</span><span class="p">:</span><span class="w"> </span><span class="n">StatePermissions</span><span class="w">  </span><span class="c"># Write permissions required</span>
<span class="w">    </span><span class="n">isOnlyAskState</span><span class="o">*</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w">          </span><span class="c"># Action-only (not persistent state)</span>
</code></pre></div>

<h3 id="observable-categories">Observable Categories</h3>
<ul>
<li><strong>Device Control</strong>: Camera, motor, light settings</li>
<li><strong>Media Management</strong>: Recording, streaming, tags</li>
<li><strong>Network Configuration</strong>: IP, hostname, services</li>
<li><strong>Storage</strong>: Paths, space monitoring</li>
<li><strong>System</strong>: Info, time, updates</li>
<li><strong>User Management</strong>: Users, roles, sessions</li>
</ul>
<h2 id="device-observables">Device Observables</h2>
<h3 id="camera-settings">Camera Settings</h3>
<h4 id="activecamerahead"><code>activeCameraHead</code></h4>
<ul>
<li><strong>Type</strong>: Integer (0 = Primary, 1 = Secondary)</li>
<li><strong>Default</strong>: <code>0</code></li>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Currently active camera head (rc_DMG variant)</li>
</ul>
<h4 id="cameraheadsettings"><code>cameraHeadSettings</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;primary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/video0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NV12&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;resolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1920x1080&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;fps&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;secondary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/video1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NV12&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;resolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1920x1080&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;fps&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Configuration for each camera head</li>
</ul>
<h4 id="imagesettings"><code>imageSettings</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;brightness&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;contrast&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;saturation&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;hue&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sharpness&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;gamma&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Image adjustment parameters</li>
</ul>
<h3 id="motor-control">Motor Control</h3>
<h4 id="discrotation"><code>discRotation</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stopped&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;speed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;position&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Rotation motor control (rc_DMG variant)</li>
</ul>
<h4 id="autorotate"><code>autoRotate</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sensitivity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Automatic rotation detection settings</li>
</ul>
<h3 id="lighting">Lighting</h3>
<h4 id="lightenabled"><code>lightEnabled</code></h4>
<ul>
<li><strong>Type</strong>: Boolean</li>
<li><strong>Default</strong>: <code>true</code></li>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Light power state</li>
</ul>
<h4 id="lightintensity"><code>lightIntensity</code></h4>
<ul>
<li><strong>Type</strong>: Integer (0-100)</li>
<li><strong>Default</strong>: <code>100</code></li>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Light brightness percentage</li>
</ul>
<h4 id="lighttemperature"><code>lightTemperature</code></h4>
<ul>
<li><strong>Type</strong>: Integer (Kelvin)</li>
<li><strong>Default</strong>: <code>5500</code></li>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: <code>Device_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Color temperature in Kelvin</li>
</ul>
<h2 id="media-observables">Media Observables</h2>
<h3 id="recording">Recording</h3>
<h4 id="recordingstate"><code>recordingState</code></h4>
<ul>
<li><strong>Type</strong>: String (<code>"stopped"</code>, <code>"recording"</code>, <code>"paused"</code>)</li>
<li><strong>Default</strong>: <code>"stopped"</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Current recording state</li>
</ul>
<h4 id="recordingmode"><code>recordingMode</code></h4>
<ul>
<li><strong>Type</strong>: String (<code>"video"</code>, <code>"timelapse"</code>, <code>"slowmotion"</code>)</li>
<li><strong>Default</strong>: <code>"video"</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Recording mode selection</li>
</ul>
<h4 id="currentrecordingfile"><code>currentRecordingFile</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>""</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Filename of active recording</li>
</ul>
<h3 id="streaming">Streaming</h3>
<h4 id="rtspenabled"><code>rtspEnabled</code></h4>
<ul>
<li><strong>Type</strong>: Boolean</li>
<li><strong>Default</strong>: <code>true</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: RTSP server enabled</li>
</ul>
<h4 id="rtspport"><code>rtspPort</code></h4>
<ul>
<li><strong>Type</strong>: Integer</li>
<li><strong>Default</strong>: <code>8554</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: RTSP server port</li>
</ul>
<h4 id="streamresolution"><code>streamResolution</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>"1920x1080"</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Stream resolution (WIDTHxHEIGHT)</li>
</ul>
<h4 id="streamframerate"><code>streamFramerate</code></h4>
<ul>
<li><strong>Type</strong>: Integer</li>
<li><strong>Default</strong>: <code>60</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Stream frames per second</li>
</ul>
<h4 id="streambitrate"><code>streamBitrate</code></h4>
<ul>
<li><strong>Type</strong>: Integer</li>
<li><strong>Default</strong>: <code>8000000</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Stream bitrate in bits/second</li>
</ul>
<h3 id="tags-and-categories">Tags and Categories</h3>
<h4 id="categories"><code>categories</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>: <code>{}</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: -</li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Tag category definitions (preserved across factory reset per #150)</li>
</ul>
<h4 id="categorycounter"><code>categoryCounter</code></h4>
<ul>
<li><strong>Type</strong>: Integer</li>
<li><strong>Default</strong>: <code>1</code></li>
<li><strong>Permissions</strong>: Read: - | Write: -</li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Auto-increment counter for category IDs</li>
</ul>
<h4 id="changetagcategory"><code>changeTagCategory</code></h4>
<ul>
<li><strong>Type</strong>: Object (action-only)</li>
<li><strong>Default</strong>: <code>{}</code></li>
<li><strong>Permissions</strong>: Read: <code>Media_r, Media_rw</code> | Write: <code>Media_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Create/update/delete tag categories</li>
</ul>
<h2 id="network-observables">Network Observables</h2>
<h3 id="network-configuration">Network Configuration</h3>
<h4 id="hostname"><code>hostname</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>"rotoclear"</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: System hostname</li>
</ul>
<h4 id="dhcpenabled"><code>dhcpEnabled</code></h4>
<ul>
<li><strong>Type</strong>: Boolean</li>
<li><strong>Default</strong>: <code>true</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Use DHCP for IP address</li>
</ul>
<h4 id="ipaddress"><code>ipAddress</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>""</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Static IP address (when DHCP disabled)</li>
</ul>
<h4 id="subnetmask"><code>subnetMask</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>"255.255.255.0"</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Network subnet mask</li>
</ul>
<h4 id="gateway"><code>gateway</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>""</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Default gateway</li>
</ul>
<h4 id="dnsservers"><code>dnsServers</code></h4>
<ul>
<li><strong>Type</strong>: Array of Strings</li>
<li><strong>Default</strong>: <code>["8.8.8.8", "8.8.4.4"]</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: DNS server addresses</li>
</ul>
<h2 id="storage-observables">Storage Observables</h2>
<h3 id="storage-management">Storage Management</h3>
<h4 id="recordingstorage"><code>recordingStorage</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;primary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/media/data/recordings&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;backup&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/media/backup/recordings&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;network&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li><strong>Permissions</strong>: Read: <code>Storage_r, Storage_rw</code> | Write: <code>Storage_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Recording storage locations</li>
</ul>
<h4 id="storagedevices"><code>storageDevices</code></h4>
<ul>
<li><strong>Type</strong>: Array</li>
<li><strong>Default</strong>: <code>[]</code></li>
<li><strong>Permissions</strong>: Read: <code>Storage_r, Storage_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Available storage devices (dynamic)</li>
</ul>
<h4 id="storagespace"><code>storageSpace</code></h4>
<ul>
<li><strong>Type</strong>: Object (dynamic)</li>
<li><strong>Default</strong>: <code>{}</code></li>
<li><strong>Permissions</strong>: Read: <code>Storage_r, Storage_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Storage space statistics</li>
</ul>
<h3 id="network-storage">Network Storage</h3>
<h4 id="netstorageenabled"><code>netStorageEnabled</code></h4>
<ul>
<li><strong>Type</strong>: Boolean</li>
<li><strong>Default</strong>: <code>false</code></li>
<li><strong>Permissions</strong>: Read: <code>Storage_r, Storage_rw</code> | Write: <code>Storage_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Enable network storage (NFS/SMB)</li>
</ul>
<h4 id="netstoragepath"><code>netStoragePath</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>""</code></li>
<li><strong>Permissions</strong>: Read: <code>Storage_r, Storage_rw</code> | Write: <code>Storage_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Network storage mount path</li>
</ul>
<h2 id="system-observables">System Observables</h2>
<h3 id="system-information">System Information</h3>
<h4 id="systeminfo"><code>systemInfo</code></h4>
<ul>
<li><strong>Type</strong>: Object (read-only)</li>
<li><strong>Default</strong>: <code>{}</code></li>
<li><strong>Permissions</strong>: Read: <code>System_r, System_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: System hardware and software info</li>
</ul>
<h4 id="cpuusage"><code>cpuUsage</code></h4>
<ul>
<li><strong>Type</strong>: Float</li>
<li><strong>Default</strong>: <code>0.0</code></li>
<li><strong>Permissions</strong>: Read: <code>System_r, System_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Current CPU usage percentage</li>
</ul>
<h4 id="memoryusage"><code>memoryUsage</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>: <code>{"used": 0, "total": 0, "percent": 0}</code></li>
<li><strong>Permissions</strong>: Read: <code>System_r, System_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Memory usage statistics</li>
</ul>
<h4 id="fpgatemperature"><code>fpgaTemperature</code></h4>
<ul>
<li><strong>Type</strong>: Float</li>
<li><strong>Default</strong>: <code>25.0</code></li>
<li><strong>Permissions</strong>: Read: <code>Device_r, Device_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: FPGA temperature in Celsius (rc_DMG variant)</li>
</ul>
<h3 id="time-and-date">Time and Date</h3>
<h4 id="time"><code>time</code></h4>
<ul>
<li><strong>Type</strong>: String (ISO 8601)</li>
<li><strong>Default</strong>: Current time</li>
<li><strong>Permissions</strong>: Read: <code>System_r, System_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Current system time</li>
</ul>
<h4 id="timezone"><code>timezone</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>"UTC"</code></li>
<li><strong>Permissions</strong>: Read: <code>System_r, System_rw</code> | Write: <code>System_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: System timezone</li>
</ul>
<h4 id="ntpenabled"><code>ntpEnabled</code></h4>
<ul>
<li><strong>Type</strong>: Boolean</li>
<li><strong>Default</strong>: <code>true</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Enable NTP time synchronization</li>
</ul>
<h4 id="ntpservers"><code>ntpServers</code></h4>
<ul>
<li><strong>Type</strong>: Array of Strings</li>
<li><strong>Default</strong>: <code>["pool.ntp.org"]</code></li>
<li><strong>Permissions</strong>: Read: <code>Network_r, Network_rw</code> | Write: <code>Network_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: NTP server addresses</li>
</ul>
<h3 id="firmware-and-updates">Firmware and Updates</h3>
<h4 id="swversionnumber"><code>swVersionNumber</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: Build version</li>
<li><strong>Permissions</strong>: Read: <code>System_r, System_rw, FirmwareUpdate_r, FirmwareUpdate_rw</code> | Write: -</li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Software version number</li>
</ul>
<h4 id="updateavailable"><code>updateAvailable</code></h4>
<ul>
<li><strong>Type</strong>: Boolean</li>
<li><strong>Default</strong>: <code>false</code></li>
<li><strong>Permissions</strong>: Read: <code>FirmwareUpdate_r, FirmwareUpdate_rw</code> | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Firmware update available flag</li>
</ul>
<h2 id="user-observables">User Observables</h2>
<h3 id="user-management">User Management</h3>
<h4 id="users"><code>users</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>: <code>{}</code></li>
<li><strong>Permissions</strong>: Read: <code>User_r, User_rw</code> | Write: <code>User_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: User accounts and roles</li>
</ul>
<h4 id="userpasswords"><code>userPasswords</code></h4>
<ul>
<li><strong>Type</strong>: Object</li>
<li><strong>Default</strong>: <code>{}</code></li>
<li><strong>Permissions</strong>: Read: - | Write: <code>User_rw</code></li>
<li><strong>Saved</strong>: Yes</li>
<li><strong>Description</strong>: Hashed passwords (never readable)</li>
</ul>
<h4 id="currentuser"><code>currentUser</code></h4>
<ul>
<li><strong>Type</strong>: String</li>
<li><strong>Default</strong>: <code>""</code></li>
<li><strong>Permissions</strong>: Read: All authenticated | Write: -</li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Currently authenticated user</li>
</ul>
<h2 id="action-observables">Action Observables</h2>
<h3 id="system-actions">System Actions</h3>
<h4 id="restart"><code>restart</code></h4>
<ul>
<li><strong>Type</strong>: Boolean (action-only)</li>
<li><strong>Default</strong>: <code>false</code></li>
<li><strong>Permissions</strong>: Read: <code>Reboot_rw</code> | Write: <code>Reboot_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Trigger system restart</li>
</ul>
<h4 id="reset"><code>reset</code></h4>
<ul>
<li><strong>Type</strong>: Boolean (action-only)</li>
<li><strong>Default</strong>: <code>false</code></li>
<li><strong>Permissions</strong>: Read: <code>FirmwareUpdate_rw</code> | Write: <code>FirmwareUpdate_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Factory reset (preserves categories per #150)</li>
</ul>
<h4 id="systemreboot"><code>systemReboot</code></h4>
<ul>
<li><strong>Type</strong>: Boolean (action-only)</li>
<li><strong>Default</strong>: <code>false</code></li>
<li><strong>Permissions</strong>: Read: <code>Reboot_rw</code> | Write: <code>Reboot_rw</code></li>
<li><strong>Saved</strong>: No</li>
<li><strong>Description</strong>: Reboot system</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="reading-observable-state">Reading Observable State</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Get observable</span>
<span class="k">let</span><span class="w"> </span><span class="n">recordingState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;recordingState&quot;</span><span class="p">)</span>

<span class="c"># Read current value</span>
<span class="k">let</span><span class="w"> </span><span class="n">isRecording</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">recordingState</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">getStr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;recording&quot;</span>

<span class="c"># Access with permissions check</span>
<span class="k">if</span><span class="w"> </span><span class="n">userPermissions</span><span class="p">.</span><span class="n">canRead</span><span class="p">(</span><span class="n">recordingState</span><span class="p">):</span>
<span class="w">  </span><span class="n">echo</span><span class="w"> </span><span class="s">&quot;Recording state: &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">recordingState</span><span class="p">.</span><span class="n">value</span>
</code></pre></div>

<h3 id="writing-observable-state">Writing Observable State</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Get observable</span>
<span class="k">let</span><span class="w"> </span><span class="n">streamBitrate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;streamBitrate&quot;</span><span class="p">)</span>

<span class="c"># Update value (triggers save if save=true)</span>
<span class="n">streamBitrate</span><span class="p">.</span><span class="n">updateValue</span><span class="p">(</span><span class="o">%</span><span class="mi">8000000</span><span class="p">)</span>

<span class="c"># With permissions check</span>
<span class="k">if</span><span class="w"> </span><span class="n">userPermissions</span><span class="p">.</span><span class="n">canWrite</span><span class="p">(</span><span class="n">streamBitrate</span><span class="p">):</span>
<span class="w">  </span><span class="n">streamBitrate</span><span class="p">.</span><span class="n">updateValue</span><span class="p">(</span><span class="o">%</span><span class="n">newBitrate</span><span class="p">)</span>
</code></pre></div>

<h3 id="observing-changes">Observing Changes</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Subscribe to changes</span>
<span class="k">let</span><span class="w"> </span><span class="n">recording</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;recordingState&quot;</span><span class="p">)</span>
<span class="n">recording</span><span class="p">.</span><span class="n">onchange</span><span class="p">.</span><span class="n">subscribe</span><span class="w"> </span><span class="n">proc</span><span class="p">(</span><span class="n">obs</span><span class="p">:</span><span class="w"> </span><span class="n">Observable</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="n">echo</span><span class="w"> </span><span class="s">&quot;Recording state changed to: &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">obs</span><span class="p">.</span><span class="n">value</span>
</code></pre></div>

<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../architecture/state-management.md">State Management</a></li>
<li><a href="../architecture/state-management.md#observable-pattern">Observable Pattern</a></li>
<li><a href="../security/permissions.md">Permissions</a></li>
<li><a href="../api/websocket-api.md">API Reference</a></li>
</ul>
            </div>
            <footer class="content-footer">
                <p>Copyright © 2025 Rotoclear</p>
            </footer>
        </main>
        
        <button class="mobile-menu-toggle" id="menuToggle" aria-label="Toggle menu">☰</button>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Inter, sans-serif'
        });
        
        // Syntax highlighting
        hljs.highlightAll();
        
        // Mobile menu toggle
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.querySelector('.sidebar');
        
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 768 && 
                !sidebar.contains(e.target) && 
                !menuToggle.contains(e.target) &&
                sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
        });
        
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>